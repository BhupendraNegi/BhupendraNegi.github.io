<!-- jQuery, Materialize, and other libraries -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js" type="text/javascript"></script>

<!-- Custom JS files -->
<script type="text/javascript" src='/assets/js/functions.js'></script>
<script type="text/javascript" src='/assets/js/transitions.js'></script>
<script type="text/javascript" src='/assets/js/initialize.js'></script>
<script type="text/javascript" src='/assets/js/script.js'></script>

<!-- Fonts and Stylesheets -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
<link href="https://fonts.googleapis.com/css?family=Raleway:100,200,300,400|Open+Sans|Josefin+Slab:300|Lobster+Two" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/assets/css/main.css" media="screen" title="no title">

<!-- Highlight.js Stylesheet and Script -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>

<script>
    Barba.Dispatcher.on('newPageReady', function() {
      document.dispatchEvent(new Event('transitionCompleted'));
      resetDisqus();  // Reinitialize Disqus after page transition
    });
  
    // Function to reset Disqus comments
    function resetDisqus() {
      if (typeof DISQUS !== 'undefined') {
        DISQUS.reset({
          reload: true, // Reload Disqus comments with the new page content
          config: function () {
            this.page.url = window.location.href;  // Set the current URL for Disqus
            this.page.identifier = window.location.pathname;  // Set page identifier (URL path)
          }
        });
      } else {
        var d = document, s = d.createElement('script');
        s.src = "https://{{ site.disqus }}.disqus.com/embed.js";
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      }
    }
  
    // Highlight.js initialization
    function reinitializeHighlighting() {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    }
  
    document.addEventListener("DOMContentLoaded", reinitializeHighlighting);
    document.addEventListener("transitionCompleted", reinitializeHighlighting);
</script>
